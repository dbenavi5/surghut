{"ast":null,"code":"var _jsxFileName = \"/Users/dianabenavides/practice/application/docker/components/Search.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport axios from 'axios';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"fetchSearchResult\", (updatedPageNo = '', query) => {\n      const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n      const searchUrl = `http://api.airvisual.com/v2/cities?state=california&country=USA&key=93e7f28f-1f6b-4286-95cc-1fa2ea89b482&q=${query}${pageNumber}`;\n\n      if (this.cancel) {\n        this.cancel.cancel();\n      }\n\n      this.cancel = axios.CancelToken.source();\n      axios.get(searchUrl, {\n        cancelToken: this.cancel.token\n      }).then(res => {\n        //console.warn(res);\n        const resultNotFoundMsg = !res.data.data.length ? 'There are no more search results. Please try new search' : '';\n        this.setState({\n          results: res.data.data,\n          message: resultNotFoundMsg,\n          loading: false\n        });\n      }).catch(error => {\n        if (axios.isCancel(error) || error) {\n          this.setState({\n            loading: false,\n            message: 'Failed to fetch the data. Please check network.'\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleOnIputChange\", event => {\n      const query = event.target.value;\n\n      if (!query) {\n        this.setState({\n          query,\n          results: {},\n          message: ''\n        });\n      } else {\n        this.setState({\n          query: query,\n          loading: true,\n          message: ''\n        }, () => {\n          this.fetchSearchResult(1, query);\n        });\n      }\n    });\n\n    _defineProperty(this, \"renderSearchResults\", () => {\n      const {\n        results\n      } = this.state;\n\n      if (Object.keys(results).length && results.length) {\n        return __jsx(\"div\", {\n          className: \"result-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }\n        }, results.map(result => {\n          return __jsx(\"a\", {\n            key: result.city,\n            href: result.city,\n            className: \"\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }\n          }, __jsx(\"h6\", {\n            className: \"resultItem\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }\n          }, result.forecasts));\n        }));\n      }\n    });\n\n    this.state = {\n      query: '',\n      results: {},\n      loading: false,\n      message: ''\n    };\n    this.cancel = '';\n  }\n\n  render() {\n    const {\n      query\n    } = this.state;\n    return __jsx(\"div\", {\n      id: \"searchWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, __jsx(\"label\", {\n      className: \"search-label\",\n      htmlFor: \"search-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      value: query,\n      name: \"query\",\n      id: \"search-input\",\n      placeholder: \"Search...\",\n      onChange: this.handleOnIputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }), __jsx(\"i\", {\n      className: \"fa fa-search search-icon\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    })), this.renderSearchResults());\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/dianabenavides/practice/application/docker/components/Search.js"],"names":["React","axios","Search","Component","constructor","props","updatedPageNo","query","pageNumber","searchUrl","cancel","CancelToken","source","get","cancelToken","token","then","res","resultNotFoundMsg","data","length","setState","results","message","loading","catch","error","isCancel","event","target","value","fetchSearchResult","state","Object","keys","map","result","city","forecasts","render","handleOnIputChange","renderSearchResults"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,MAAN,SAAqBF,KAAK,CAACG,SAA3B,CAAqC;AAEjCC,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAChB,UAAOA,KAAP;;AADgB,+CAcA,CAAEC,aAAa,GAAG,EAAlB,EAAsBC,KAAtB,KAAgC;AAEhD,YAAMC,UAAU,GAAGF,aAAa,GAAI,SAAQA,aAAc,EAA1B,GAA8B,EAA9D;AACA,YAAMG,SAAS,GAAI,8GAA6GF,KAAM,GAAEC,UAAW,EAAnJ;;AAEA,UAAI,KAAKE,MAAT,EAAiB;AACb,aAAKA,MAAL,CAAYA,MAAZ;AACH;;AAED,WAAKA,MAAL,GAAcT,KAAK,CAACU,WAAN,CAAkBC,MAAlB,EAAd;AAEAX,MAAAA,KAAK,CAACY,GAAN,CAAWJ,SAAX,EAAsB;AAClBK,QAAAA,WAAW,EAAE,KAAKJ,MAAL,CAAYK;AADP,OAAtB,EAGKC,IAHL,CAGUC,GAAG,IAAI;AACT;AACA,cAAMC,iBAAiB,GAAG,CAAED,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,MAAhB,GAAyB,yDAAzB,GAAqF,EAA/G;AAEA,aAAKC,QAAL,CAAc;AACVC,UAAAA,OAAO,EAAEL,GAAG,CAACE,IAAJ,CAASA,IADR;AAEVI,UAAAA,OAAO,EAAEL,iBAFC;AAGVM,UAAAA,OAAO,EAAE;AAHC,SAAd;AAMH,OAbL,EAcKC,KAdL,CAcYC,KAAK,IAAI;AACb,YAAIzB,KAAK,CAAC0B,QAAN,CAAeD,KAAf,KAAyBA,KAA7B,EAAoC;AAChC,eAAKL,QAAL,CAAc;AACVG,YAAAA,OAAO,EAAE,KADC;AAEVD,YAAAA,OAAO,EAAE;AAFC,WAAd;AAIH;AACJ,OArBL;AAsBH,KA/CmB;;AAAA,gDAiDGK,KAAF,IAAa;AAC9B,YAAMrB,KAAK,GAAGqB,KAAK,CAACC,MAAN,CAAaC,KAA3B;;AACC,UAAI,CAAEvB,KAAN,EAAc;AACV,aAAKc,QAAL,CAAc;AAACd,UAAAA,KAAD;AAAQe,UAAAA,OAAO,EAAE,EAAjB;AAAqBC,UAAAA,OAAO,EAAE;AAA9B,SAAd;AACH,OAFD,MAEO;AACJ,aAAKF,QAAL,CAAc;AAAEd,UAAAA,KAAK,EAAEA,KAAT;AAAgBiB,UAAAA,OAAO,EAAE,IAAzB;AAA+BD,UAAAA,OAAO,EAAC;AAAvC,SAAd,EAA0D,MAAM;AAC5D,eAAKQ,iBAAL,CAAwB,CAAxB,EAA2BxB,KAA3B;AACH,SAFD;AAGF;AAEL,KA3DmB;;AAAA,iDA6DG,MAAM;AACzB,YAAM;AAAEe,QAAAA;AAAF,UAAc,KAAKU,KAAzB;;AAGA,UAAIC,MAAM,CAACC,IAAP,CAAaZ,OAAb,EAAuBF,MAAvB,IAAiCE,OAAO,CAACF,MAA7C,EAAqD;AACjD,eAGI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACME,OAAO,CAACa,GAAR,CAAaC,MAAM,IAAI;AACrB,iBACI;AAAG,YAAA,GAAG,EAAGA,MAAM,CAACC,IAAhB;AAAuB,YAAA,IAAI,EAAGD,MAAM,CAACC,IAArC;AAA4C,YAAA,SAAS,EAAC,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAI,YAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA6BD,MAAM,CAACE,SAApC,CADJ,CADJ;AAOH,SARC,CADN,CAHJ;AAeH;AACJ,KAlFmB;;AAGhB,SAAKN,KAAL,GAAa;AACTzB,MAAAA,KAAK,EAAE,EADE;AAETe,MAAAA,OAAO,EAAE,EAFA;AAGTE,MAAAA,OAAO,EAAE,KAHA;AAITD,MAAAA,OAAO,EAAE;AAJA,KAAb;AAOA,SAAKb,MAAL,GAAc,EAAd;AAEH;;AAwED6B,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEhC,MAAAA;AAAF,QAAY,KAAKyB,KAAvB;AACA,WACI;AAAK,MAAA,EAAE,EAAE,eAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,cAAjB;AAAgC,MAAA,OAAO,EAAC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,KAAK,EAAEzB,KAFX;AAGI,MAAA,IAAI,EAAC,OAHT;AAII,MAAA,EAAE,EAAE,cAJR;AAKI,MAAA,WAAW,EAAC,WALhB;AAMI,MAAA,QAAQ,EAAE,KAAKiC,kBANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EASI;AAAG,MAAA,SAAS,EAAC,0BAAb;AAAwC,qBAAY,MAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CADJ,EAiBM,KAAKC,mBAAL,EAjBN,CADJ;AAsBH;;AA9GgC;;AAkHrC,eAAevC,MAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nclass Search extends React.Component {\n\n    constructor (props) {\n        super (props);\n\n        this.state = {\n            query: '',\n            results: {},\n            loading: false,\n            message: ''\n        };\n\n        this.cancel = '';\n        \n    }\n\n    fetchSearchResult = ( updatedPageNo = '', query) => {\n\n        const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n        const searchUrl = `http://api.airvisual.com/v2/cities?state=california&country=USA&key=93e7f28f-1f6b-4286-95cc-1fa2ea89b482&q=${query}${pageNumber}`;\n\n        if( this.cancel) {\n            this.cancel.cancel();\n        }\n\n        this.cancel = axios.CancelToken.source();\n\n        axios.get( searchUrl, {\n            cancelToken: this.cancel.token\n        })\n            .then(res => {\n                //console.warn(res);\n                const resultNotFoundMsg = ! res.data.data.length ? 'There are no more search results. Please try new search' : '';\n\n                this.setState({\n                    results: res.data.data,\n                    message: resultNotFoundMsg,\n                    loading: false\n                })\n                \n            })\n            .catch( error => {\n                if( axios.isCancel(error) || error ){\n                    this.setState({\n                        loading: false,\n                        message: 'Failed to fetch the data. Please check network.'\n                    })\n                }\n            })\n    };\n\n    handleOnIputChange = ( event ) => {\n        const query = event.target.value;\n         if( ! query ) {\n             this.setState({query, results: {}, message: ''});\n         } else {\n            this.setState({ query: query, loading: true, message:''}, () => {\n                this.fetchSearchResult( 1, query );\n            });\n         }\n        \n    };\n\n    renderSearchResults =  () => {\n        const { results } = this.state;\n\n\n        if( Object.keys( results ).length && results.length ){\n            return (\n\n                \n                <div className=\"result-container\">\n                    { results.map( result => {\n                        return(\n                            <a key={ result.city } href={ result.city } className=\"\">\n                                <h6 className=\"resultItem\">{ result.forecasts }</h6>\n                                \n                                {/* <a className=\"image\" href=\"{ result.forecasts }\" alt={result.country}>{ result.forecasts }</a> */}\n                            </a>             \n                        )\n                    })}\n\n                </div>)\n        }\n    };\n\n    render() {\n        const { query } = this.state;\n        return (\n            <div id= \"searchWrapper\">     \n                <label className=\"search-label\" htmlFor=\"search-input\" >\n                    <input \n                        type=\"text\" \n                        value={query}\n                        name=\"query\"\n                        id= \"search-input\" \n                        placeholder=\"Search...\"\n                        onChange={this.handleOnIputChange}\n                    />\n                    <i className=\"fa fa-search search-icon\" aria-hidden=\"true\"></i>\n                </label> \n\n                {/* Error Message */}\n                {/* {message && <p className=\"message\">{ message }</p>} */}\n\n                {/* Results */}\n                { this.renderSearchResults() }\n                \n            </div> \n        )\n    }\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}