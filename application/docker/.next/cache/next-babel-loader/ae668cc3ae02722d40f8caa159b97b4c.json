{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/dianabenavides/practice/application/docker/components/Search.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport axios from 'axios';\n\nvar Search = /*#__PURE__*/function (_React$Component) {\n  _inherits(Search, _React$Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchSearchResult\", function () {\n      var updatedPageNo = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var query = arguments.length > 1 ? arguments[1] : undefined;\n      var pageNumber = updatedPageNo ? \"&page=\".concat(updatedPageNo) : '';\n      var searchUrl = \"http://api.airvisual.com/v2/cities?state=california&country=USA&key=93e7f28f-1f6b-4286-95cc-1fa2ea89b482&q=\".concat(query).concat(pageNumber);\n\n      if (_this.cancel) {\n        _this.cancel.cancel();\n      }\n\n      _this.cancel = axios.CancelToken.source();\n      axios.get(searchUrl, {\n        cancelToken: _this.cancel.token\n      }).then(function (res) {\n        //console.warn(res);\n        var resultNotFoundMsg = !res.data.data.length ? 'There are no more search results. Please try new search' : '';\n\n        _this.setState({\n          results: res.data.data,\n          message: resultNotFoundMsg,\n          loading: false\n        });\n      })[\"catch\"](function (error) {\n        if (axios.isCancel(error) || error) {\n          _this.setState({\n            loading: false,\n            message: 'Failed to fetch the data. Please check network.'\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnIputChange\", function (event) {\n      var query = event.target.value;\n\n      _this.setState({\n        query: query,\n        loading: true,\n        message: ''\n      }, function () {\n        _this.fetchSearchResult(1, query);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSearchResults\", function () {\n      var results = _this.state.results;\n\n      if (Object.keys(results).length && results.length) {\n        return __jsx(\"div\", {\n          className: \"result-container\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }\n        }, results.map(function (result) {\n          return __jsx(\"a\", {\n            key: result.city,\n            href: result.city,\n            className: \"\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }\n          }, __jsx(\"h6\", {\n            className: \"resultItem\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }\n          }, result.city));\n        }));\n      }\n    });\n\n    _this.state = {\n      query: '',\n      results: {},\n      loading: false,\n      message: ''\n    };\n    _this.cancel = '';\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var query = this.state.query;\n      return __jsx(\"div\", {\n        id: \"searchWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }, __jsx(\"label\", {\n        className: \"search-label\",\n        htmlFor: \"search-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, __jsx(\"input\", {\n        type: \"text\",\n        value: query,\n        name: \"query\",\n        id: \"search-input\",\n        placeholder: \"Search for something...\",\n        onChange: this.handleOnIputChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }), __jsx(\"i\", {\n        className: \"fa fa-search search-icon\",\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      })), this.renderSearchResults());\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/dianabenavides/practice/application/docker/components/Search.js"],"names":["React","axios","Search","props","updatedPageNo","query","pageNumber","searchUrl","cancel","CancelToken","source","get","cancelToken","token","then","res","resultNotFoundMsg","data","length","setState","results","message","loading","error","isCancel","event","target","value","fetchSearchResult","state","Object","keys","map","result","city","handleOnIputChange","renderSearchResults","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nclass Search extends React.Component {\n\n    constructor (props) {\n        super (props);\n\n        this.state = {\n            query: '',\n            results: {},\n            loading: false,\n            message: ''\n        };\n\n        this.cancel = '';\n        \n    }\n\n    fetchSearchResult = ( updatedPageNo = '', query) => {\n\n        const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n        const searchUrl = `http://api.airvisual.com/v2/cities?state=california&country=USA&key=93e7f28f-1f6b-4286-95cc-1fa2ea89b482&q=${query}${pageNumber}`;\n\n        if( this.cancel) {\n            this.cancel.cancel();\n        }\n\n        this.cancel = axios.CancelToken.source();\n\n        axios.get( searchUrl, {\n            cancelToken: this.cancel.token\n        })\n            .then(res => {\n                //console.warn(res);\n                const resultNotFoundMsg = ! res.data.data.length ? 'There are no more search results. Please try new search' : '';\n\n                this.setState({\n                    results: res.data.data,\n                    message: resultNotFoundMsg,\n                    loading: false\n                })\n                \n            })\n            .catch( error => {\n                if( axios.isCancel(error) || error ){\n                    this.setState({\n                        loading: false,\n                        message: 'Failed to fetch the data. Please check network.'\n                    })\n                }\n            })\n    };\n\n    handleOnIputChange = ( event ) => {\n        const query = event.target.value;\n        this.setState({ query: query, loading: true, message:''}, () => {\n            this.fetchSearchResult(1, query);\n        });\n        \n    };\n\n    renderSearchResults = () => {\n        const { results } = this.state;\n\n        if( Object.keys( results ).length && results.length ){\n            return (\n                <div className=\"result-container\">\n                    { results.map( result => {\n                        return(\n                            <a key={ result.city } href={ result.city } className=\"\">\n                                <h6 className=\"resultItem\">{ result.city }</h6>\n                                \n                                {/* <a className=\"image\" href=\"{ result.forecasts }\" alt={result.country}>{ result.forecasts }</a> */}\n                            </a>             \n                        )\n                    })}\n\n                </div>)\n        }\n    };\n\n    render() {\n        const { query } = this.state;\n        return (\n            <div id= \"searchWrapper\">     \n                <label className=\"search-label\" htmlFor=\"search-input\" >\n                    <input \n                        type=\"text\" \n                        value={query}\n                        name=\"query\"\n                        id= \"search-input\" \n                        placeholder=\"Search for something...\"\n                        onChange={this.handleOnIputChange}\n                    />\n                    <i className=\"fa fa-search search-icon\" aria-hidden=\"true\"></i>\n                </label> \n\n                {/* Results */}\n                { this.renderSearchResults() }\n                \n            </div> \n        )\n    }\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}